import{r as t,h as e,c as s,g as i}from"./p-396d79ae.js";function l(){let t="";for(let e=0;e<32;e++){const s=Math.random()*16|0;if(e===8||e===12||e===16||e===20){t+="-"}t+=(e===12?4:e===16?s&3|8:s).toString(16)}return t}class o{constructor(t,e=false,s=l()){this.title=t;this.completed=e;this.id=s}}const c="todos-stencil";class d{constructor(){this.todos=[]}add(t){return this.save(this.todos.concat(new o(t)))}editTitle(t,e){return this.edit(t.id,(t=>Object.assign(Object.assign({},t),{title:e})))}toggleCompleted(t){return this.edit(t.id,(t=>Object.assign(Object.assign({},t),{completed:!t.completed})))}toggleAll(t){return this.save(this.todos.map((e=>Object.assign(Object.assign({},e),{completed:t}))))}delete(t){return this.save(this.todos.filter((e=>e.id!==t.id)))}clearCompleted(){return this.save(this.todos.filter((t=>!t.completed)))}load(){if(window.localStorage!==undefined){return this.todos=JSON.parse(localStorage.getItem(c)||"[]")}return this.todos=[]}save(t){if(window.localStorage!==undefined){localStorage.setItem(c,JSON.stringify(t))}return this.todos=t}edit(t,e){return this.save(this.todos.map((s=>t===s.id?e(s):s)))}}const a=13;const h=class{constructor(e){t(this,e);this.todoService=new d;this.todos=this.todoService.load();this.filter="all"}get filteredTodos(){switch(this.filter){case"active":return this.todos.filter((t=>!t.completed));case"completed":return this.todos.filter((t=>t.completed));default:return this.todos}}componentWillLoad(){this.updateFilterFromUrl(document.location.href)}render(){return e("section",{key:"bbbd52cda04ff7e3e97457f7bcb8f4ad3821f5b5",class:"todoapp"},e("header",{key:"716648bd89fc2b4526fb2b1ba23f3242db6cc4ee",class:"header"},e("h1",{key:"27a1c5a2494d1446393423ab08879db2d528d5db"},"todos"),e("input",{key:"f9200e31d1d4b87be3e3ff8faa75fa8fce219e54",class:"new-todo",placeholder:"What needs to be done?",autoComplete:"on",autoFocus:true,onKeyUp:t=>this.onKeyUp(t)})),e("todo-list",{key:"9b02dc3453862ec1c42f9a4ff9764b7dcd774cd5",todos:this.filteredTodos}),this.todos.length>0?e("todo-footer",{todos:this.todos,filter:this.filter}):null)}todoDeleted(t){this.todos=this.todoService.delete(t.detail)}toggleCompleted(t){this.todos=this.todoService.toggleCompleted(t.detail)}editTitle(t){this.todos=this.todoService.editTitle(t.detail.todo,t.detail.newTitle)}toggleAll(t){this.todos=this.todoService.toggleAll(t.detail)}onKeyUp(t){if(t.keyCode===a){const e=t.target;const s=e.value.trim();if(s!==""){this.todos=this.todoService.add(e.value);e.value=""}}}hashChanged(t){this.updateFilterFromUrl(t.newURL)}updateFilterFromUrl(t){this.filter=t&&t.split("#/")[1]||"all"}clearCompleted(){this.todos=this.todoService.clearCompleted()}};const n=class{constructor(e){t(this,e);this.clearCompleted=s(this,"clearCompleted",7);this.todos=undefined;this.filter=undefined}render(){let t=null;if(this.todos.some((t=>t.completed))){t=e("button",{key:"4f58af0f6b4f59afe913936c4094407ab2cda4af",class:"clear-completed",onClick:this.clearCompleted.emit},"Clear completed")}return e("footer",{key:"60ae3d7b767bc3cdcc587e87749523eb7a8c5976",class:"footer"},this.renderTodoCount(),e("ul",{key:"56fd1766840c19cc331e4470763a586a31713f0e",class:"filters"},e("li",{key:"bd42e3e2f7bddd758fb40787081491c673cf11b8"},e("a",{key:"fc799ef645bef7cb668a8073f1e7089733f4a1a4",class:{selected:this.filter==="all"},href:"#/"},"All")),e("li",{key:"280074631697a77cb0b80b4cc3b245e4f1c32e47"},e("a",{key:"f4cd66ae8f7a94b7b1bf51366e00f46b85226ef6",class:{selected:this.filter==="active"},href:"#/active"},"Active")),e("li",{key:"51c4640767410a2a245fa107598fca815babc754"},e("a",{key:"3a01ce6ab88ae24185c8c439c1a07779197760a6",class:{selected:this.filter==="completed"},href:"#/completed"},"Completed"))),t)}renderTodoCount(){const t=this.todos.filter((t=>!t.completed)).length;return e("span",{class:"todo-count"},e("strong",null,t)," ",t>1||t<1?"items":"item"," left")}};const r=13;const f=27;const u=class{constructor(e){t(this,e);this.todoDeleted=s(this,"todoDeleted",7);this.toggleCompleted=s(this,"toggleCompleted",7);this.editTitle=s(this,"editTitle",7);this.toggleAll=s(this,"toggleAll",7);this.todos=undefined;this.editing=undefined}render(){return this.todos.length<=0?null:e("section",{class:"main"},e("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",onClick:()=>this.onToggleAll(),checked:this.allCompleted()}),e("label",{htmlFor:"toggle-all"},"Mark all as complete"),e("ul",{class:"todo-list"},this.todos.map((t=>this.renderTodo(t)))))}renderTodo(t){return e("li",{class:{completed:t.completed,editing:t.id===this.editing}},e("div",{class:"view"},e("input",{class:"toggle",type:"checkbox",checked:t.completed,onChange:()=>this.toggle(t)}),e("label",{onDblClick:()=>this.edit(t)},t.title),e("button",{class:"destroy",onClick:()=>this.deleteTodo(t)})),e("input",{class:"edit",onBlur:e=>this.doneEdit(t,e),onKeyUp:e=>this.onKeyUp(t,e),value:t.title}))}allCompleted(){return this.todos.filter((t=>!t.completed)).length===0}toggle(t){this.toggleCompleted.emit(t)}deleteTodo(t){this.todoDeleted.emit(t)}onToggleAll(){this.toggleAll.emit(!this.allCompleted())}edit(t){this.editing=t.id;setTimeout((()=>{const t=this.el.getElementsByClassName("editing")[0].getElementsByClassName("edit")[0];t.focus();t.selectionStart=t.value.length}),0)}onKeyUp(t,e){if(e.keyCode===r){this.doneEdit(t,e)}else if(e.keyCode===f){this.editing=null}}doneEdit(t,e){this.editing=null;const s=e.target.value.trim();if(s&&s.length>0){this.editTitle.emit({todo:t,newTitle:s})}else{this.deleteTodo(t)}}get el(){return i(this)}};export{h as todo_app,n as todo_footer,u as todo_list};
//# sourceMappingURL=p-1c8c7dd8.entry.js.map